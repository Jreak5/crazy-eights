<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Crazy 8's Game</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      text-align: center;
      background-color: white;
    }
    #game {
      margin-top: 20px;
    }
    #player-hand img, #top-card img {
      width: 80px;
      margin: 5px;
      cursor: pointer;
    }
    #bot-hands {
      margin: 20px 0;
    }
    #bot-hands div {
      margin: 10px;
    }
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
      background-color: rgba(0,0,0,0.6);
      justify-content: center;
      align-items: center;
    }
    .modal-content {
      background: white;
      padding: 20px;
      border-radius: 10px;
    }
    .suit-choice {
      display: inline-block;
      margin: 10px;
      cursor: pointer;
    }
    .suit-choice svg {
      width: 60px;
      height: 60px;
    }
  </style>
</head>
<body>
  <h1>Crazy 8's Game</h1>
  <button onclick="startGame()">New Game</button>
  <button onclick="drawCard()">Draw</button>

  <div id="game">
    <div id="top-card"></div>
    <div id="player-hand"></div>
    <div id="bot-hands"></div>
  </div>

  <!-- Suit Picker Modal -->
  <div id="suitModal" class="modal">
    <div class="modal-content">
      <h2>Pick a Suit</h2>
      <div>
        <!-- Spade -->
        <div class="suit-choice" onclick="chooseSuit('Spades')">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <path d="M50 5 C20 40, 0 60, 50 95 C100 60, 80 40, 50 5 Z" fill="black"/>
            <rect x="45" y="70" width="10" height="20" fill="black"/>
          </svg>
        </div>
        <!-- Heart -->
        <div class="suit-choice" onclick="chooseSuit('Hearts')">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <path d="M50 90 L10 40 A20 20 0 0 1 50 25 A20 20 0 0 1 90 40 Z" fill="red"/>
          </svg>
        </div>
        <!-- Diamond -->
        <div class="suit-choice" onclick="chooseSuit('Diamonds')">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <polygon points="50,5 95,50 50,95 5,50" fill="red"/>
          </svg>
        </div>
        <!-- Club -->
        <div class="suit-choice" onclick="chooseSuit('Clubs')">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100">
            <circle cx="50" cy="30" r="20" fill="black"/>
            <circle cx="30" cy="55" r="20" fill="black"/>
            <circle cx="70" cy="55" r="20" fill="black"/>
            <rect x="45" y="70" width="10" height="20" fill="black"/>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <script>
    const suits = ["Hearts", "Diamonds", "Clubs", "Spades"];
    const values = ["2","3","4","5","6","7","8","9","10","J","Q","K","A"];

    let deck = [];
    let playerHand = [];
    let botHands = [];
    let topCard = null;
    let currentSuit = null;
    let numBots = 3;

    function createDeck() {
      deck = [];
      for (let suit of suits) {
        for (let value of values) {
          deck.push({suit, value});
        }
      }
      deck.sort(() => Math.random() - 0.5);
    }

    function startGame() {
      createDeck();
      playerHand = [];
      botHands = Array.from({length: numBots}, () => []);
      for (let i=0; i<5; i++) {
        playerHand.push(deck.pop());
        for (let b=0; b<numBots; b++) {
          botHands[b].push(deck.pop());
        }
      }
      topCard = deck.pop();
      currentSuit = topCard.suit;
      render();
    }

    function render() {
      document.getElementById("player-hand").innerHTML =
        playerHand.map((card,i) =>
          `<img src="https://raw.githubusercontent.com/hayeah/playing-cards-assets/master/png/${card.value}_of_${card.suit.toLowerCase()}.png" onclick="playCard(${i})">`
        ).join("");

      document.getElementById("top-card").innerHTML =
        `<h3>Top Card</h3><img src="https://raw.githubusercontent.com/hayeah/playing-cards-assets/master/png/${topCard.value}_of_${topCard.suit.toLowerCase()}.png">`;

      document.getElementById("bot-hands").innerHTML = botHands.map(
        (hand,i) => `<div>Bot ${i+1}: ${hand.length} cards</div>`
      ).join("");
    }

    function playCard(index) {
      const card = playerHand[index];
      if (card.value === "8" || card.suit === currentSuit || card.value === topCard.value) {
        topCard = card;
        currentSuit = card.suit;
        playerHand.splice(index,1);
        if (card.value === "8") {
          document.getElementById("suitModal").style.display = "flex";
          return;
        }
        checkWin();
        botTurn();
        render();
      }
    }

    function chooseSuit(suit) {
      currentSuit = suit;
      document.getElementById("suitModal").style.display = "none";
      checkWin();
      botTurn();
      render();
    }

    function drawCard() {
      if (deck.length === 0) createDeck();
      playerHand.push(deck.pop());
      render();
    }

    function botTurn() {
      for (let bot of botHands) {
        let playable = bot.find(c => c.suit === currentSuit || c.value === topCard.value || c.value === "8");
        if (playable) {
          topCard = playable;
          currentSuit = playable.suit;
          bot.splice(bot.indexOf(playable),1);
          if (playable.value === "8") {
            currentSuit = suits[Math.floor(Math.random()*suits.length)];
          }
        } else if (deck.length > 0) {
          bot.push(deck.pop());
        }
      }
      checkWin();
    }

    function checkWin() {
      if (playerHand.length === 0) {
        alert("You win!");
        startGame();
      }
      for (let i=0; i<botHands.length; i++) {
        if (botHands[i].length === 0) {
          alert(`Bot ${i+1} wins!`);
          startGame();
        }
      }
    }
  </script>
</body>
</html>
