<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Crazy 8's</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #2e7d32; color: white; }
    #game { margin: 20px; }
    .hand, .bot-hand { display: flex; justify-content: center; margin: 10px; }
    .card { width: 70px; height: 100px; border: 1px solid #fff; border-radius: 8px; background: white; color: black; display: flex; align-items: center; justify-content: center; margin: 5px; font-size: 20px; cursor: pointer; }
    #suitModal { display: none; position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: white; color: black; padding: 20px; border-radius: 10px; }
    .suit-option { display: inline-block; width: 60px; height: 60px; margin: 10px; cursor: pointer; }
    .suit-option svg { width: 100%; height: 100%; }
  </style>
</head>
<body>
  <h1>Crazy 8's Game</h1>
  <button onclick="startGame()">New Game</button>
  <div id="game">
    <p>Top Card: <span id="topCard"></span></p>
    <div id="playerHand" class="hand"></div>
    <div id="botHands"></div>
  </div>

  <!-- Suit Picker Modal -->
  <div id="suitModal">
    <p>Pick a suit:</p>
    <div class="suit-option" onclick="chooseSuit('♠')">
      <svg viewBox="0 0 100 100">
        <path d="M50 5 C20 35, 20 65, 50 95 C80 65, 80 35, 50 5 Z" fill="black"/>
        <rect x="45" y="70" width="10" height="25" fill="black"/>
      </svg>
    </div>
    <div class="suit-option" onclick="chooseSuit('♥')">
      <svg viewBox="0 0 100 100">
        <path d="M50 85 L10 35 A20 20 0 0 1 50 25 A20 20 0 0 1 90 35 Z" fill="red"/>
      </svg>
    </div>
    <div class="suit-option" onclick="chooseSuit('♦')">
      <svg viewBox="0 0 100 100">
        <polygon points="50,5 95,50 50,95 5,50" fill="red"/>
      </svg>
    </div>
    <div class="suit-option" onclick="chooseSuit('♣')">
      <svg viewBox="0 0 100 100">
        <circle cx="50" cy="25" r="18" fill="black"/>
        <circle cx="32" cy="50" r="18" fill="black"/>
        <circle cx="68" cy="50" r="18" fill="black"/>
        <rect x="45" y="50" width="10" height="30" fill="black"/>
      </svg>
    </div>
  </div>

  <script>
    let deck = [], playerHand = [], bots = [], topCard = null;

    function createDeck() {
      const suits = ['♠','♥','♦','♣'];
      const values = ['A','2','3','4','5','6','7','8','9','10','J','Q','K'];
      let newDeck = [];
      for (let suit of suits) {
        for (let value of values) {
          newDeck.push({suit,value});
        }
      }
      return newDeck.sort(() => Math.random() - 0.5);
    }

    function startGame() {
      deck = createDeck();
      playerHand = [];
      bots = [[],[],[]]; // 3 bots
      for (let i = 0; i < 5; i++) {   // FIX: Deal 5 cards, not 10
        playerHand.push(deck.pop());
        for (let b = 0; b < bots.length; b++) {
          bots[b].push(deck.pop());
        }
      }
      topCard = deck.pop();
      renderGame();
    }

    function renderGame() {
      document.getElementById("topCard").innerText = topCard.value + topCard.suit;
      const handDiv = document.getElementById("playerHand");
      handDiv.innerHTML = "";
      for (let card of playerHand) {
        const c = document.createElement("div");
        c.className = "card";
        c.innerText = card.value + card.suit;
        c.onclick = () => playCard(card);
        handDiv.appendChild(c);
      }
      const botDiv = document.getElementById("botHands");
      botDiv.innerHTML = "";
      bots.forEach((bot,i) => {
        let bDiv = document.createElement("div");
        bDiv.className = "bot-hand";
        bDiv.innerText = `Bot ${i+1}: ${bot.length} cards`;
        botDiv.appendChild(bDiv);
      });
    }

    function playCard(card) {
      if (card.value === "8") {
        showSuitModal();
        playerHand = playerHand.filter(c => c !== card);
      } else {
        topCard = card;
        playerHand = playerHand.filter(c => c !== card);
      }
      renderGame();
    }

    function showSuitModal() {
      document.getElementById("suitModal").style.display = "block";
    }

    function chooseSuit(suit) {
      topCard = {value: "8", suit};
      document.getElementById("suitModal").style.display = "none";
      renderGame();
    }
  </script>
</body>
</html>
