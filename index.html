<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Crazy 8's Game</title>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; background: #2e8b57; color: white; }
    #game { margin-top: 20px; }
    .card { width: 80px; margin: 5px; display: inline-block; }
    #hand img { cursor: pointer; }
    #suitModal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.8); }
    #suitOptions { background: white; color: black; width: 300px; margin: 200px auto; padding: 20px; border-radius: 8px; }
    .suit-btn { width: 60px; height: 60px; margin: 10px; display: inline-block; cursor: pointer; }
    svg { width: 100%; height: 100%; }
  </style>
</head>
<body>
  <h1>Crazy 8's Game</h1>
  <button onclick="startGame()">New Game</button>
  <button onclick="drawCard()">Draw</button>

  <div id="game">
    <h3>Top Card:</h3>
    <div id="topCard"></div>
    <h3>Your Hand:</h3>
    <div id="hand"></div>
    <h3>Bots:</h3>
    <div id="bots"></div>
  </div>

  <!-- Suit picker modal -->
  <div id="suitModal">
    <div id="suitOptions">
      <h3>Pick a suit</h3>
      <div id="suits">
        <div class="suit-btn" onclick="chooseSuit('hearts')">
          <svg viewBox="0 0 100 100">
            <path d="M50 90 L10 40 A20 20 0 0 1 50 20 A20 20 0 0 1 90 40 Z" fill="red"/>
          </svg>
        </div>
        <div class="suit-btn" onclick="chooseSuit('diamonds')">
          <svg viewBox="0 0 100 100">
            <path d="M50 5 L95 50 L50 95 L5 50 Z" fill="red"/>
          </svg>
        </div>
        <div class="suit-btn" onclick="chooseSuit('clubs')">
          <svg viewBox="0 0 100 100">
            <circle cx="50" cy="25" r="20" fill="black"/>
            <circle cx="30" cy="55" r="20" fill="black"/>
            <circle cx="70" cy="55" r="20" fill="black"/>
            <rect x="45" y="50" width="10" height="45" fill="black"/>
          </svg>
        </div>
        <div class="suit-btn" onclick="chooseSuit('spades')">
          <svg viewBox="0 0 100 100">
            <path d="M50 5 C20 35, 20 65, 50 95 C80 65, 80 35, 50 5 Z" fill="black"/>
            <rect x="45" y="60" width="10" height="35" fill="black"/>
          </svg>
        </div>
      </div>
    </div>
  </div>

  <script>
    let deck = [];
    let playerHand = [];
    let botHands = [];
    let topCard = null;
    let currentSuit = null;
    let turn = 0;
    let numBots = 3;

    function startGame() {
      deck = createDeck();
      shuffle(deck);
      playerHand = deck.splice(0, 5);
      botHands = Array.from({length: numBots}, () => deck.splice(0, 5));
      topCard = deck.pop();
      currentSuit = topCard.suit;
      turn = 0;
      updateDisplay();
    }

    function createDeck() {
      const suits = ["hearts","diamonds","clubs","spades"];
      const values = ["A","2","3","4","5","6","7","8","9","10","J","Q","K"];
      let d = [];
      for (let s of suits) {
        for (let v of values) {
          d.push({suit: s, value: v});
        }
      }
      return d;
    }

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    function updateDisplay() {
      document.getElementById("topCard").innerHTML = renderCard(topCard);
      document.getElementById("hand").innerHTML = playerHand.map((c,i) => `<img class="card" src="https://deckofcardsapi.com/static/img/${c.value}${c.suit[0].toUpperCase()}.png" onclick="playCard(${i})">`).join("");
      document.getElementById("bots").innerText = botHands.map((h,i)=>`Bot ${i+1}: ${h.length} cards`).join(" | ");
    }

    function renderCard(card) {
      return `<img class="card" src="https://deckofcardsapi.com/static/img/${card.value}${card.suit[0].toUpperCase()}.png">`;
    }

    function playCard(index) {
      let card = playerHand[index];
      if (card.value === "8" || card.suit === currentSuit || card.value === topCard.value) {
        topCard = card;
        playerHand.splice(index,1);
        if (card.value === "8") {
          document.getElementById("suitModal").style.display = "block";
        } else {
          currentSuit = card.suit;
          nextTurn();
        }
        updateDisplay();
      }
    }

    function drawCard() {
      if (deck.length > 0) {
        playerHand.push(deck.pop());
        updateDisplay();
      }
    }

    function chooseSuit(suit) {
      currentSuit = suit;
      document.getElementById("suitModal").style.display = "none";
      nextTurn();
    }

    function nextTurn() {
      turn = (turn + 1) % (numBots + 1);
      if (turn > 0) {
        botPlay(turn - 1);
      }
    }

    function botPlay(botIndex) {
      let hand = botHands[botIndex];
      let playable = hand.find(c => c.suit === currentSuit || c.value === topCard.value || c.value === "8");
      if (playable) {
        topCard = playable;
        hand.splice(hand.indexOf(playable),1);
        currentSuit = playable.value === "8" ? ["hearts","diamonds","clubs","spades"][Math.floor(Math.random()*4)] : playable.suit;
      } else {
        if (deck.length > 0) hand.push(deck.pop());
      }
      updateDisplay();
      turn = (turn + 1) % (numBots + 1);
      if (turn > 0) botPlay(turn - 1);
    }
  </script>
</body>
</html>
